<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Compra de Tickets</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
@keyframes partyAnimation {
  0% {
    transform: scale(1);
    background-color: red;
	color: white;
  }
  25% {
    transform: scale(1.2);
    background-color: yellow;
	color: blue;
  }
  50% {
    transform: scale(1);
    background-color: blue;
	color: orange;
  }
  75% {
    transform: scale(1.2);
    background-color: green;
	color: yellow;
  }
  100% {
    transform: scale(1);
    background-color: purple;
	color: pink;
  }
}

#thankYouText {
  font-size: 60px;
  animation: textAnimation 3s infinite;
  display: none;
}

@keyframes textAnimation {
  0% {
    color: red;
  }
  25% {
    color: yellow;
  }
  50% {
    color: blue;
  }
  75% {
    color: green;
  }
  100% {
    color: purple;
  }
}

#fireworks {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  pointer-events: none;
  display: none;  /* Inicialmente oculto */
}

.firework {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: pink;
  animation: fireworksAnimation 0.3s infinite;
}

@keyframes fireworksAnimation {
   0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

.party {
  animation: partyAnimation 0.7s infinite;
}

</style>

</head>
<body>
 
   <h1 class="row justify-content-center">Compre sus tickets</h1>
<br>
<section class="container pt-section">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-7">
	 <div class="row row-cols-1 row-cols-md-3 text-center">
                    <div class="col">
                        <div class="card mb-4 rounded-3 shadow-sm border-primary">
                            <div class="card-header py-3 text-white bg-primary border-primary">
                                <h4 class="my-0 fw-normal">Estudiante</h4>
                            </div>
                            <div class="card-body">
                                <p>Tienen un descuento</p>
                                <h3 class="card-title pricing-card-title">80%</h3>
                                <small class="fw-light text-muted mt-3">* Presentar documentación</small>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card mb-4 rounded-3 shadow-sm border-info">
                            <div class="card-header py-3 text-white bg-info border-info">
                                <h4 class="my-0 fw-normal">Trainee</h4>
                            </div>
                            <div class="card-body">
                                <p>Tienen un descuento</p>
                                <h3 class="card-title pricing-card-title">50%</h3>
                                <small class="fw-light text-muted mt-3">* Presentar documentación</small>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card mb-4 rounded-3 shadow-sm border-warning">
                            <div class="card-header py-3 text-white bg-warning border-warning">
                                <h4 class="my-0 fw-normal">Junior</h4>
                            </div>
                            <div class="card-body">
                                <p>Tienen un descuento</p>
                                <h3 class="card-title pricing-card-title">15%</h3>
                                <small class="fw-light text-muted mt-3">* Presentar documentación</small>
                            </div>
                        </div>
                    </div>
                </div>


 <h1 class="row justify-content-center">Complete el Formulario</h1>
<br>
<div id="fireworks">
<div id="partyAnimation">
  <h1 id="thankYouText" class="text-center">¡Muchas gracias por su compra!</h1>
</div></div>
   <form action="" name="formu2">
 <div class="row gx-2">
                        <div class="col-md mb-3">
                            <input type="text" class="form-control" placeholder="Nombre" name="nombre" id="nombre" required>
                        </div>
                        <div class="col-md mb-3">
                            <input type="text" class="form-control" placeholder="Apellido" name="apellido" id="apellido" required>
                        </div>
                    </div>

	<p>
        <input type="email" class="form-control w-100" placeholder="Email" name="email" id="email" required>
     	</p>
	<p>
       <label for="terminos">
         <input type="checkbox" name="terminos" id="terminos" value="terminos" required> Certifico que las informaciones son verdaderas.
       </label>
     </p>
<h1 class="row justify-content-center">Valor del Ticket: $200</h1>

<div class="row gx-2">
                        <div class="col-md mb-3">
                            <label for="cantidadTickets" class="form-label">Cantidad</label>
                            <input type="number" class="form-control" placeholder="Cantidad" aria-label="Cantidad" id="cantidadTickets" min="1" required>
                        </div>
                        <div class="col-md mb-3">
                            <label for="categoriaSelect" class="form-label">Categoría</label>
                            <select class="form-select" aria-label="Categoría" id="categoriaSelect">
                                <option value="" selected>-- Seleccione --</option>
                                <option value="0">Sin Categoria</option>
                                <option value="1">Estudiante</option>
                                <option value="2">Trainee</option>
                                <option value="3">Junior</option>
                            </select>
                        </div>
                    </div>

                    <div class="alert alert-primary mt-2 mb-4" role="alert">
                        Total a pagar: <b>$ <span id="totalPago" class="align-middle"></b></span>
                    </div>
                    <div class="row gx-2">
                        <div class="col-sm mb-3">
                            <button type="reset" class="w-100 btn btn-lg btn-form" id="btnBorrar" style="background-color: #9BF54B; color: white; text-size: 1.5rem; margin-bottom: 1rem; border: 1px solid #9BDB63;">Borrar</button>
                        </div>
                        <div class="col-sm mb-3">
                            <button type="button" class="w-100 btn btn-lg btn-form" id="btnResumen" style="background-color: #6FF8EE; color: #566573; text-size: 1.5rem; margin-bottom: 1rem; border: 1px solid #6FF8EE;">Resumen</button>
                        </div>
			<div class="col-sm mb-3">
                            <button type="button" class="w-100 btn btn-lg btn-form" id="btnComprar" onclick="quieroComprar()" style="background-color: red; color: white; text-size: 1.5rem; margin-bottom: 1rem; border: 1px solid red;">Comprar</button>
                        </div>
                    </div>


       
    
   </form>
</div>
</div>
</section>

<script>
// Defino valor de ticket
const valorTicket = 200;

// Defino porcentajes de descuento según categoría
let descuentoEstudiante = 80;
let descuentoTrainee    = 50;
let descuentoJunior     = 15;

// Elementos en variables
let nombre          = document.getElementById("nombre");
let apellido        = document.getElementById("apellido");
let mail            = document.getElementById("mail");
let cantidadTickets = document.getElementById("cantidadTickets");
let categoria       = document.getElementById("categoriaSelect");
let totalValorTickets = document.getElementById("totalPago");

nombre.focus();
// Cálculo total a pagar
function total_a_pagar() {
    	switch (nombre.value) {
	case "":
        alert(`Nombre obligatorio`);
	nombre.classList.add("is-invalid");
        nombre.focus();
        return false;
	break; }
	switch (apellido.value) {
	case "":
        alert(`Apellido obligatorio`);
        return false;
	break; }
	
	var re = /^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
   	if (!re.test(email.value)) {
        alert('Email inválido');
        return false; }

	 if (!terminos.checked) {
        alert("Debe confirmar que la información ingresada es verdadera");
        return false;  }
 	
	// Verifico si está ingresado al menos 1 ticket, sino que aplique un estilo de error, haga foco en el campo y se detenga
    	if ( (cantidadTickets.value == 0) || (isNaN(cantidadTickets.value)) ) {
        alert("Por favor, ingresá correctamente cantidad de tickets.");
        cantidadTickets.classList.add("is-invalid");
        return false;  }
    // Verifico que haya seleccionado una categoría, sino que aplique un estilo de error, haga foco en el campo y se detenga
    switch (categoria.value) {
	case "":
        alert(`Por favor indicar su categoría`);
        return false;   }

    // Multiplico cantidad de tickets por el valor
    let totalValorTickets = (cantidadTickets.value) * valorTicket;
    // Aplico descuentos según categoría
    if (categoria.value == 0) {
        totalValorTickets = totalValorTickets ;
    }
    if (categoria.value == 1) {
        totalValorTickets = totalValorTickets - (descuentoEstudiante / 100 * totalValorTickets);
    }
    if (categoria.value == 2) {
        totalValorTickets = totalValorTickets - (descuentoTrainee / 100 * totalValorTickets);
    }
    if (categoria.value == 3) {
        totalValorTickets = totalValorTickets - (descuentoJunior / 100 * totalValorTickets);
    }
// Inserto el valor en el HTML
totalPago.innerHTML = totalValorTickets;
console.log(totalValorTickets);
return totalValorTickets;
}

// Botón Resumen recibe un escuchador y la funcion del cálculo
btnResumen.addEventListener('click', total_a_pagar);

function crearFuegosArtificiales() {
  var fireworksContainer = document.getElementById("fireworks");

  for (var i = 0; i < 20; i++) {
    var firework = document.createElement("div");
    firework.classList.add("firework");
    firework.style.left = Math.random() * 100 + "%";
    firework.style.top = Math.random() * 100 + "%";
    fireworksContainer.appendChild(firework);
  }
}

function mostrarAnimacionFiesta() {
  // Agrega la clase CSS "party" al elemento
  var partyElement = document.getElementById("partyAnimation");
  var thankYouText = document.getElementById("thankYouText");
  var fireworks = document.getElementById("fireworks");
  // Agrega la clase CSS "party" al elemento
	partyElement.classList.add("party");
  // Muestra el texto después de un breve retraso (por ejemplo, 1 segundo)
  setTimeout(function() {
    	thankYouText.style.display = "block";
	fireworks.style.display = "block";
	crearFuegosArtificiales();
  }, 1000); // 1000 milisegundos = 1 segundo
  // Elimina la clase "party" después de cierto tiempo (por ejemplo, 5 segundos)
  setTimeout(function() {
    partyElement.classList.remove("party");
	thankYouText.style.display = "none";
	fireworks.style.display = "none";
  }, 5000); // 5000 milisegundos = 5 segundos
setTimeout(function() {
print(formu2)}, 7000);
}


function quieroComprar() {
var totalPago = total_a_pagar();
console.log(totalPago);
if (totalPago != 0 && cantidadTickets.value != 0){
mostrarAnimacionFiesta();
window.alert("Confirmamos la compra de: " + cantidadTickets.value + " ticket(s), por el valor de: $ "+ totalPago + ", le enviaremos en un email los tickets y ahora aparecerá la pantalla para imprimirlos si lo desea.");
}
}

// Función para quitar el estilo de error a los elementos del form
function quitarClaseError() {
    let x = document.querySelectorAll(".form-control, .form-select");
    let i;
    for (i = 0; i < x.length; i++) {
        x[i].classList.remove('is-invalid');
    }
}

// Función para el botón Borrar para que borre el valor
function reset_total_a_pagar() {
    quitarClaseError();
    totalPago.innerHTML = "";
}
btnBorrar.addEventListener('click', reset_total_a_pagar);
</script>
</body>
</html>